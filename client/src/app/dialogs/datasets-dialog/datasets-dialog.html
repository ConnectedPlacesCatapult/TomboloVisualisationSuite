<div mat-dialog-content fxLayout="row">
  <div class="left-column">

    <mat-input-container floatLabel="never">
      <input matInput class="searchbar"
             #searchBox
             (keyup.enter)="filterByQuery(searchBox.value)"
             placeholder="Search Datasets"
             tabindex="-1">
      <button mat-icon-button matSuffix (click)="filterByQuery(searchBox.value)">
        <mat-icon svgIcon="search"></mat-icon>
      </button>
    </mat-input-container>
    <hr>

    <h3>Categories</h3>
    <mat-nav-list class="categories-list" *ngIf="groups">
      <mat-list-item *ngFor="let group of groups"
                     [ngClass]="{selected: group == selectedGroup}"
                     (click)="selectGroup(group)">
        {{group.name}}
      </mat-list-item>
    </mat-nav-list>

  </div>

  <div *ngIf="!datasets" class="right-column" Markdown>
    Browse our curated datasets
    ===========================

    Choose a **dataset category** from the list on the left to view a selection of curated datasets that you can add to
    your map.

    Your selected dataset will appear as a new layer on you map. Use the Map Editor to style your new layer after it has
    been added.

    You can also **search** for datasets using keywords. Datasets that match your keywords will be
    shown. For example, a search for 'map' will find datasets that include 'map' or 'maps' in their name or description. A
    search for 'uk map' will find datasets that match 'uk' *and* 'map'.
  </div>

  <div *ngIf="datasets" class="right-column">
    <h3>Datasets</h3>

    <mat-nav-list class="datasets-list" *ngIf="datasets">
      <mat-list-item *ngFor="let dataset of datasets"
                     [ngClass]="{selected: dataset == selectedDataset}"
                     (click)="selectDataset(dataset)">{{dataset.name}}
      </mat-list-item>
    </mat-nav-list>

    <hr>

    <div *ngIf="datasets?.length && !selectedDataset" class="message">
      Select a dataset from the list above to view its description.
    </div>

    <div *ngIf="datasets && datasets.length == 0" class="message">
      Your search did not return any relevant datasets.
    </div>

    <div *ngIf="selectedDataset" class="description row-flex-item" Markdown
         [data]="selectedDataset.description">
    </div>

  </div>
</div>

<div mat-dialog-actions fxLayoutAlign="end">
  <button mat-raised-button (click)="close()"
          angularticsCategory="Playground"
          angularticsAction="CancelPublicDatasets">Cancel</button>
  <button mat-raised-button cdk-focus-start color="accent"
          [disabled]="!selectedDataset"
          (click)="addToMap()"
          angularticsCategory="Playground"
          angularticsAction="AddPublicDatasetToMap">Add to Map</button>
</div>
