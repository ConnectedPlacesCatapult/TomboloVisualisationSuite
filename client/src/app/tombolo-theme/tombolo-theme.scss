@import '~@angular/material/theming';
@import 'gradients';


// standard grid size
$g: 20px;

// standard border radius for rounded corners
$br: 4px;

$sidebar-left-width: $g * 12 !default;
$sidebar-right-width: $g * 15 !default;
$sidebar-padding: $g;

$map-zoom-button-size: $g * 1.5;

@mixin tombolo-theme($theme, $typography: null) {

  @if $typography == null {
    $typography: mat-typography-config();
  }

  $primary: map-get($theme, primary);
  $accent: map-get($theme, accent);
  $warn: map-get($theme, warn);
  $foreground: map-get($theme, foreground);
  $background: map-get($theme, background);

  a {
    color: inherit;
    outline: none;
  }

  /* Sidebars */

  .sidebar {
    box-shadow: 0 0 20px 0px mat-color($primary,.15) !important;
  }

  .sidebar-left {
    width: $sidebar-left-width;
    @include gradient-sidebar-left($primary);
  }

  .sidebar-right {
    width: $sidebar-right-width;
    bottom: $g * 4.5 !important;

    // Allow sidebar tab to stick out
    overflow-y: visible !important;
  }

  /* Sidebar tab is button that sticks out from left side of righthand sidebar */
  .sidebar-tab {

    // Show even when sidebar is closed
    visibility: visible;

    // Position sticking out at top left of sidebar
    position: absolute;
    top: 0;
    left: -$g * 2;
    width: $g * 2;
    height: $g * 2;

    background-color: mat-color($background, background);
    border-radius: 0 0 0 $br;
  }

  /* Filters map color to sit underneath blue background of translucent left sidebar */
  .color-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: $sidebar-left-width;
    bottom: 0;
    background-color: mat-color($primary);
    mix-blend-mode: hue;
  }

  /* Tombolo branding */
  div.tombolo-branding {
    height: $g * 4;
    background-image: url(/assets/images/tombolo.svg);
    background-repeat: no-repeat;
    background-position: center;

    a {
      display: block;
      height: 100%;
      text-indent: -9999px;
    }
  }

  /* Left sidebar nav list */
  .sidebar-left .mat-nav-list {

    a.mat-list-item {
      padding: 0;

      .mat-list-item-content {
        padding: 0 $g;

        mat-icon {
          // Add right padding to move text onto grid position
          padding-right: $g - 4px;
        }
      }
    }

    // Add radio button as background image
    .mat-list-item, .mat-list-item:hover {
      background-image:  url(/assets/icons/radio-off.svg) !important;
      background-repeat: no-repeat !important;
      background-position: $sidebar-left-width - 24px - $g center !important;
    }

    .mat-list-item.active, .mat-list-item.active:hover {
      background-image:  url(/assets/icons/radio-on.svg) !important;
      background-repeat: no-repeat !important;
      background-position: $sidebar-left-width - 29px - $g center !important;
    }

  }



  /* Map Controls */

  tombolo-mapbox .zoom-button {
    // Turn from circle to rounded square
    border-radius: $br !important;

    // Shrink from default FAB button size
    width: $map-zoom-button-size;
    height: $map-zoom-button-size;

    // Reposition at bottom left of map
    top: auto !important;
    bottom: $g * 1.5 !important;
    left: $sidebar-left-width + $g * 1.5 !important;
    &.zoom-button-plus {
      bottom: $g * 1.5 + $map-zoom-button-size + 5px !important;
    }

    // Center the icons
    .mat-button-wrapper {
      display: block;
      padding: 2px 0;
    }
  }


  //a.mat-list-item.active, a.mat-list-item.active:hover, a.mat-list-item.active:visited, a.mat-list-item.active:focus {
  //  background-color: mat-color($accent);
  //  color: mat-contrast($accent, 500);
  //}

  .full-width {
    width: 100%;
  }

  /* Sidebar styling */
  .sidebar-component {
    @include mat-fill();
    display: flex;
    flex-direction: column;
  }

  h1.sidebar-header {
    display: flex;
    box-sizing: border-box;
    align-items: center;
    justify-content: space-around;
    padding: $sidebar-padding;
    margin: 0;

    color: mat-color($accent, 0.5);
    background-color: mat-color($primary, darker);
    @include mat-typography-level-to-styles($typography, display-1);
  }

  .sidebar-content {
    @include mat-typography-level-to-styles($typography, body-1);

    overflow-y: auto;
    flex: 1 1;

    &.with-padding {
      padding: $sidebar-padding;
    }
  }

  .sidebar-footer {

  }

  .button-box {
    display: flex;
    align-items: center;
    justify-content: space-around;
    padding: $sidebar-padding;
  }

  /* Markdown styling */
  div[markdown] {
    h1 {
      @include mat-typography-level-to-styles($typography, subheading-2);
    }

    h2 {
      @include mat-typography-level-to-styles($typography, subheading-1);
    }

    p {
      @include mat-typography-level-to-styles($typography, body-1);
    }

    ul {
      padding-left: 1em;
    }
  }

  /* Slider box */
  .slider-box {
    padding: 0 16px;
    h3 {
      @include mat-typography-level-to-styles($typography, caption);
      padding:0;
      margin:0;
    }
    .slider-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      @include mat-typography-level-to-styles($typography, caption);
      text-transform: uppercase;
      color: mat-color($foreground, hint-text);
      .mat-slider {
        margin: 0.5em;
        flex: 1;
      }
    }
  }
}
